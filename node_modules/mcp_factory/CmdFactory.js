var ctrl = require("mcp_control");
var config = require("mcp_config");
var adminCtl = ctrl.adminCtl;
var cTradeCrl = ctrl.cTradeCtl;
var printCtl = ctrl.printCtl;
var cQueryCtl = ctrl.cQueryCtl;
var ec = config.ec;

var CmdFactory = function(){};

CmdFactory.prototype.handle = function(headNode, bodyStr, cb)
{
    if(headNode == undefined){
        cb(ec.E0006);
        return;
    }
    var cmdGroup = headNode.cmd.match(/^([A-Z]+)([0-9]{1,})$/);

    if(cmdGroup[1] == "AD")
    {
        adminCtl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == "CT")
    {
        cTradeCrl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == "CQ")
    {
        cQueryCtl.handle(headNode, bodyStr, cb);
    }
    else if(cmdGroup[1] == "P")
    {
        printCtl.handle(headNode, bodyStr, cb);
    }
    else
    {
        cb(ec.E9000);
    }
};

var cmdFactory = new CmdFactory();
module.exports = cmdFactory;